def merge_line(line: list[int]):
    simplified = [0] * 4
    i = 0
    min_index = 0
    for value in line:
        if value > 0:
            if i > min_index and simplified[i-1] == value:
                simplified[i-1] *= 2
                min_index = i
            else:
                simplified[i] = value
                i += 1
    return simplified

def mergeable(line: list[int]):
    back_index = -1
    fore_index = 0
    while fore_index < 4:
        if line[fore_index] > 0:
            if (back_index >= 0 and line[fore_index] == line[back_index]) or (fore_index - back_index > 1):
                return True
            back_index = fore_index
        fore_index += 1
    return False

tests = [
    ([0, 0, 0, 0], [0, 0, 0, 0]),
    
    ([0, 0, 0, 2], [2, 0, 0, 0]),
    ([0, 0, 0, 4], [4, 0, 0, 0]),
    
    ([0, 0, 2, 0], [2, 0, 0, 0]),
    ([0, 0, 4, 0], [4, 0, 0, 0]),
    
    ([0, 0, 2, 2], [4, 0, 0, 0]),
    ([0, 0, 2, 4], [2, 4, 0, 0]),
    ([0, 0, 4, 2], [4, 2, 0, 0]),
    ([0, 0, 4, 4], [8, 0, 0, 0]),
    
    ([0, 2, 0, 0], [2, 0, 0, 0]),
    ([0, 4, 0, 0], [4, 0, 0, 0]),

    ([0, 2, 0, 2], [4, 0, 0, 0]),
    ([0, 2, 0, 4], [2, 4, 0, 0]),
    ([0, 4, 0, 2], [4, 2, 0, 0]),
    ([0, 4, 0, 4], [8, 0, 0, 0]),

    ([0, 2, 2, 2], [4, 2, 0, 0]),
    ([0, 2, 2, 4], [4, 4, 0, 0]),
    ([0, 2, 4, 2], [2, 4, 2, 0]),
    ([0, 2, 4, 4], [2, 8, 0, 0]),
    ([0, 4, 2, 2], [4, 4, 0, 0]),
    ([0, 4, 2, 4], [4, 2, 4, 0]),
    ([0, 4, 4, 2], [8, 2, 0, 0]),
    ([0, 4, 4, 4], [8, 4, 0, 0]),
    
    ([2, 0, 0, 0], [2, 0, 0, 0]),
    ([4, 0, 0, 0], [4, 0, 0, 0]),
    
    ([2, 0, 0, 2], [4, 0, 0, 0]),
    ([2, 0, 0, 4], [2, 4, 0, 0]),
    ([4, 0, 0, 2], [4, 2, 0, 0]),
    ([4, 0, 0, 4], [8, 0, 0, 0]),
    
    ([2, 0, 2, 0], [4, 0, 0, 0]),
    ([2, 0, 4, 0], [2, 4, 0, 0]),
    ([4, 0, 2, 0], [4, 2, 0, 0]),
    ([4, 0, 4, 0], [8, 0, 0, 0]),
    
    ([2, 0, 2, 2], [4, 2, 0, 0]),
    ([2, 0, 2, 4], [4, 4, 0, 0]),
    ([2, 0, 4, 2], [2, 4, 2, 0]),
    ([2, 0, 4, 4], [2, 8, 0, 0]),
    ([4, 0, 2, 2], [4, 4, 0, 0]),
    ([4, 0, 2, 4], [4, 2, 4, 0]),
    ([4, 0, 4, 2], [8, 2, 0, 0]),
    ([4, 0, 4, 4], [8, 4, 0, 0]),
    
    ([2, 2, 0, 0], [4, 0, 0, 0]),
    ([2, 4, 0, 0], [2, 4, 0, 0]),
    ([4, 2, 0, 0], [4, 2, 0, 0]),
    ([4, 4, 0, 0], [8, 0, 0, 0]),
    
    ([2, 2, 0, 2], [4, 2, 0, 0]),
    ([2, 2, 0, 4], [4, 4, 0, 0]),
    ([2, 4, 0, 2], [2, 4, 2, 0]),
    ([2, 4, 0, 4], [2, 8, 0, 0]),
    ([4, 2, 0, 2], [4, 4, 0, 0]),
    ([4, 2, 0, 4], [4, 2, 4, 0]),
    ([4, 4, 0, 2], [8, 2, 0, 0]),
    ([4, 4, 0, 4], [8, 4, 0, 0]),
    
    ([2, 2, 2, 2], [4, 4, 0, 0]),
    ([2, 2, 2, 4], [4, 2, 4, 0]),
    ([2, 2, 4, 2], [4, 4, 2, 0]),
    ([2, 2, 4, 4], [4, 8, 0, 0]),
    ([2, 4, 2, 2], [2, 4, 4, 0]),
    ([2, 4, 2, 4], [2, 4, 2, 4]),
    ([2, 4, 4, 2], [2, 8, 2, 0]),
    ([2, 4, 4, 4], [2, 8, 4, 0]),
    ([4, 2, 2, 2], [4, 4, 2, 0]),
    ([4, 2, 2, 4], [4, 4, 4, 0]),
    ([4, 2, 4, 2], [4, 2, 4, 2]),
    ([4, 2, 4, 4], [4, 2, 8, 0]),
    ([4, 4, 2, 2], [8, 4, 0, 0]),
    ([4, 4, 2, 4], [8, 2, 4, 0]),
    ([4, 4, 4, 2], [8, 4, 2, 0]),
    ([4, 4, 4, 4], [8, 8, 0, 0]),
]

import time

start_time = time.time()

for test, answer in tests:
    simplified = mergeable(test)
    print(simplified, test != answer)
